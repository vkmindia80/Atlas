{"ast":null,"code":"import React from'react';import{NavLink,useNavigate}from'react-router-dom';import{HomeIcon,FolderIcon,BriefcaseIcon,UsersIcon,ChartBarIcon,CogIcon,ArrowRightOnRectangleIcon}from'@heroicons/react/24/outline';import{useAuth}from'../../store/AuthContext';import{UserRole}from'../../types/auth';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const navigation=[{name:'Dashboard',href:'/',icon:HomeIcon,roles:Object.values(UserRole)},{name:'Portfolios',href:'/portfolios',icon:FolderIcon,roles:[UserRole.ADMIN,UserRole.PMO_ADMIN,UserRole.PORTFOLIO_MANAGER,UserRole.PROJECT_MANAGER,UserRole.FINANCE,UserRole.VIEWER]},{name:'Projects',href:'/projects',icon:BriefcaseIcon,roles:Object.values(UserRole)},{name:'Users',href:'/users',icon:UsersIcon,roles:[UserRole.ADMIN,UserRole.PMO_ADMIN]},{name:'Reports',href:'/reports',icon:ChartBarIcon,roles:[UserRole.ADMIN,UserRole.PMO_ADMIN,UserRole.PORTFOLIO_MANAGER,UserRole.PROJECT_MANAGER,UserRole.FINANCE]},{name:'Admin',href:'/admin',icon:CogIcon,roles:[UserRole.ADMIN,UserRole.PMO_ADMIN]}];function classNames(){for(var _len=arguments.length,classes=new Array(_len),_key=0;_key<_len;_key++){classes[_key]=arguments[_key];}return classes.filter(Boolean).join(' ');}export const Sidebar=()=>{var _user$full_name,_user$role;const{user,logout}=useAuth();const navigate=useNavigate();const handleLogout=async()=>{try{await logout();navigate('/login');}catch(error){console.error('Logout failed:',error);}};const filteredNavigation=navigation.filter(item=>(user===null||user===void 0?void 0:user.role)&&item.roles.includes(user.role));return/*#__PURE__*/_jsx(\"div\",{className:\"hidden md:flex md:flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col w-64\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col flex-grow pt-5 pb-4 overflow-y-auto bg-white border-r border-gray-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center flex-shrink-0 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-bold text-lg\",children:\"A\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-3 text-xl font-semibold text-gray-900\",children:\"AtlasPM\"})]})}),/*#__PURE__*/_jsx(\"nav\",{className:\"mt-8 flex-1 px-2 space-y-1\",children:filteredNavigation.map(item=>/*#__PURE__*/_jsx(NavLink,{to:item.href,className:_ref=>{let{isActive}=_ref;return classNames(isActive?'bg-primary-50 border-primary-500 text-primary-700':'border-transparent text-gray-600 hover:bg-gray-50 hover:text-gray-900','group flex items-center pl-3 pr-2 py-2 border-l-4 text-sm font-medium');},children:_ref2=>{let{isActive}=_ref2;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(item.icon,{className:classNames(isActive?'text-primary-500':'text-gray-400 group-hover:text-gray-500','mr-3 flex-shrink-0 h-6 w-6'),\"aria-hidden\":\"true\"}),item.name]});}},item.name))}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 p-4 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:(user===null||user===void 0?void 0:(_user$full_name=user.full_name)===null||_user$full_name===void 0?void 0:_user$full_name.charAt(0))||'U'})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3 flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900 truncate\",children:user===null||user===void 0?void 0:user.full_name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 truncate\",children:user===null||user===void 0?void 0:(_user$role=user.role)===null||_user$role===void 0?void 0:_user$role.replace('_',' ').toUpperCase()})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"ml-3 p-1 text-gray-400 hover:text-gray-500\",title:\"Logout\",children:/*#__PURE__*/_jsx(ArrowRightOnRectangleIcon,{className:\"w-5 h-5\"})})]})})]})})});};","map":{"version":3,"names":["React","NavLink","useNavigate","HomeIcon","FolderIcon","BriefcaseIcon","UsersIcon","ChartBarIcon","CogIcon","ArrowRightOnRectangleIcon","useAuth","UserRole","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","navigation","name","href","icon","roles","Object","values","ADMIN","PMO_ADMIN","PORTFOLIO_MANAGER","PROJECT_MANAGER","FINANCE","VIEWER","classNames","_len","arguments","length","classes","Array","_key","filter","Boolean","join","Sidebar","_user$full_name","_user$role","user","logout","navigate","handleLogout","error","console","filteredNavigation","item","role","includes","className","children","map","to","_ref","isActive","_ref2","full_name","charAt","replace","toUpperCase","onClick","title"],"sources":["/app/frontend/src/components/Layout/Sidebar.tsx"],"sourcesContent":["import React from 'react';\nimport { NavLink, useNavigate } from 'react-router-dom';\nimport {\n  HomeIcon,\n  FolderIcon,\n  BriefcaseIcon,\n  UsersIcon,\n  ChartBarIcon,\n  CogIcon,\n  ArrowRightOnRectangleIcon,\n} from '@heroicons/react/24/outline';\nimport { useAuth } from '../../store/AuthContext';\nimport { UserRole } from '../../types/auth';\n\nconst navigation = [\n  { name: 'Dashboard', href: '/', icon: HomeIcon, roles: Object.values(UserRole) },\n  { name: 'Portfolios', href: '/portfolios', icon: FolderIcon, roles: [UserRole.ADMIN, UserRole.PMO_ADMIN, UserRole.PORTFOLIO_MANAGER, UserRole.PROJECT_MANAGER, UserRole.FINANCE, UserRole.VIEWER] },\n  { name: 'Projects', href: '/projects', icon: BriefcaseIcon, roles: Object.values(UserRole) },\n  { name: 'Users', href: '/users', icon: UsersIcon, roles: [UserRole.ADMIN, UserRole.PMO_ADMIN] },\n  { name: 'Reports', href: '/reports', icon: ChartBarIcon, roles: [UserRole.ADMIN, UserRole.PMO_ADMIN, UserRole.PORTFOLIO_MANAGER, UserRole.PROJECT_MANAGER, UserRole.FINANCE] },\n  { name: 'Admin', href: '/admin', icon: CogIcon, roles: [UserRole.ADMIN, UserRole.PMO_ADMIN] },\n];\n\nfunction classNames(...classes: string[]) {\n  return classes.filter(Boolean).join(' ');\n}\n\nexport const Sidebar: React.FC = () => {\n  const { user, logout } = useAuth();\n  const navigate = useNavigate();\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n      navigate('/login');\n    } catch (error) {\n      console.error('Logout failed:', error);\n    }\n  };\n\n  const filteredNavigation = navigation.filter(item => \n    user?.role && item.roles.includes(user.role)\n  );\n\n  return (\n    <div className=\"hidden md:flex md:flex-shrink-0\">\n      <div className=\"flex flex-col w-64\">\n        <div className=\"flex flex-col flex-grow pt-5 pb-4 overflow-y-auto bg-white border-r border-gray-200\">\n          {/* Logo */}\n          <div className=\"flex items-center flex-shrink-0 px-4\">\n            <div className=\"flex items-center\">\n              <div className=\"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center\">\n                <span className=\"text-white font-bold text-lg\">A</span>\n              </div>\n              <span className=\"ml-3 text-xl font-semibold text-gray-900\">AtlasPM</span>\n            </div>\n          </div>\n\n          {/* Navigation */}\n          <nav className=\"mt-8 flex-1 px-2 space-y-1\">\n            {filteredNavigation.map((item) => (\n              <NavLink\n                key={item.name}\n                to={item.href}\n                className={({ isActive }) =>\n                  classNames(\n                    isActive\n                      ? 'bg-primary-50 border-primary-500 text-primary-700'\n                      : 'border-transparent text-gray-600 hover:bg-gray-50 hover:text-gray-900',\n                    'group flex items-center pl-3 pr-2 py-2 border-l-4 text-sm font-medium'\n                  )\n                }\n              >\n                {({ isActive }) => (\n                  <>\n                    <item.icon\n                      className={classNames(\n                        isActive ? 'text-primary-500' : 'text-gray-400 group-hover:text-gray-500',\n                        'mr-3 flex-shrink-0 h-6 w-6'\n                      )}\n                      aria-hidden=\"true\"\n                    />\n                    {item.name}\n                  </>\n                )}\n              </NavLink>\n            ))}\n          </nav>\n\n          {/* User info and logout */}\n          <div className=\"flex-shrink-0 p-4 border-t border-gray-200\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <div className=\"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center\">\n                  <span className=\"text-sm font-medium text-gray-700\">\n                    {user?.full_name?.charAt(0) || 'U'}\n                  </span>\n                </div>\n              </div>\n              <div className=\"ml-3 flex-1 min-w-0\">\n                <p className=\"text-sm font-medium text-gray-900 truncate\">\n                  {user?.full_name}\n                </p>\n                <p className=\"text-xs text-gray-500 truncate\">\n                  {user?.role?.replace('_', ' ').toUpperCase()}\n                </p>\n              </div>\n              <button\n                onClick={handleLogout}\n                className=\"ml-3 p-1 text-gray-400 hover:text-gray-500\"\n                title=\"Logout\"\n              >\n                <ArrowRightOnRectangleIcon className=\"w-5 h-5\" />\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,OAAO,CAAEC,WAAW,KAAQ,kBAAkB,CACvD,OACEC,QAAQ,CACRC,UAAU,CACVC,aAAa,CACbC,SAAS,CACTC,YAAY,CACZC,OAAO,CACPC,yBAAyB,KACpB,6BAA6B,CACpC,OAASC,OAAO,KAAQ,yBAAyB,CACjD,OAASC,QAAQ,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE5C,KAAM,CAAAC,UAAU,CAAG,CACjB,CAAEC,IAAI,CAAE,WAAW,CAAEC,IAAI,CAAE,GAAG,CAAEC,IAAI,CAAElB,QAAQ,CAAEmB,KAAK,CAAEC,MAAM,CAACC,MAAM,CAACb,QAAQ,CAAE,CAAC,CAChF,CAAEQ,IAAI,CAAE,YAAY,CAAEC,IAAI,CAAE,aAAa,CAAEC,IAAI,CAAEjB,UAAU,CAAEkB,KAAK,CAAE,CAACX,QAAQ,CAACc,KAAK,CAAEd,QAAQ,CAACe,SAAS,CAAEf,QAAQ,CAACgB,iBAAiB,CAAEhB,QAAQ,CAACiB,eAAe,CAAEjB,QAAQ,CAACkB,OAAO,CAAElB,QAAQ,CAACmB,MAAM,CAAE,CAAC,CACnM,CAAEX,IAAI,CAAE,UAAU,CAAEC,IAAI,CAAE,WAAW,CAAEC,IAAI,CAAEhB,aAAa,CAAEiB,KAAK,CAAEC,MAAM,CAACC,MAAM,CAACb,QAAQ,CAAE,CAAC,CAC5F,CAAEQ,IAAI,CAAE,OAAO,CAAEC,IAAI,CAAE,QAAQ,CAAEC,IAAI,CAAEf,SAAS,CAAEgB,KAAK,CAAE,CAACX,QAAQ,CAACc,KAAK,CAAEd,QAAQ,CAACe,SAAS,CAAE,CAAC,CAC/F,CAAEP,IAAI,CAAE,SAAS,CAAEC,IAAI,CAAE,UAAU,CAAEC,IAAI,CAAEd,YAAY,CAAEe,KAAK,CAAE,CAACX,QAAQ,CAACc,KAAK,CAAEd,QAAQ,CAACe,SAAS,CAAEf,QAAQ,CAACgB,iBAAiB,CAAEhB,QAAQ,CAACiB,eAAe,CAAEjB,QAAQ,CAACkB,OAAO,CAAE,CAAC,CAC9K,CAAEV,IAAI,CAAE,OAAO,CAAEC,IAAI,CAAE,QAAQ,CAAEC,IAAI,CAAEb,OAAO,CAAEc,KAAK,CAAE,CAACX,QAAQ,CAACc,KAAK,CAAEd,QAAQ,CAACe,SAAS,CAAE,CAAC,CAC9F,CAED,QAAS,CAAAK,UAAUA,CAAA,CAAuB,SAAAC,IAAA,CAAAC,SAAA,CAAAC,MAAA,CAAnBC,OAAO,KAAAC,KAAA,CAAAJ,IAAA,EAAAK,IAAA,GAAAA,IAAA,CAAAL,IAAA,CAAAK,IAAA,IAAPF,OAAO,CAAAE,IAAA,EAAAJ,SAAA,CAAAI,IAAA,GAC5B,MAAO,CAAAF,OAAO,CAACG,MAAM,CAACC,OAAO,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC,CAC1C,CAEA,MAAO,MAAM,CAAAC,OAAiB,CAAGA,CAAA,GAAM,KAAAC,eAAA,CAAAC,UAAA,CACrC,KAAM,CAAEC,IAAI,CAAEC,MAAO,CAAC,CAAGnC,OAAO,CAAC,CAAC,CAClC,KAAM,CAAAoC,QAAQ,CAAG5C,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAA6C,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAF,MAAM,CAAC,CAAC,CACdC,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CACxC,CACF,CAAC,CAED,KAAM,CAAAE,kBAAkB,CAAGhC,UAAU,CAACoB,MAAM,CAACa,IAAI,EAC/C,CAAAP,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEQ,IAAI,GAAID,IAAI,CAAC7B,KAAK,CAAC+B,QAAQ,CAACT,IAAI,CAACQ,IAAI,CAC7C,CAAC,CAED,mBACEvC,IAAA,QAAKyC,SAAS,CAAC,iCAAiC,CAAAC,QAAA,cAC9C1C,IAAA,QAAKyC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACjCxC,KAAA,QAAKuC,SAAS,CAAC,qFAAqF,CAAAC,QAAA,eAElG1C,IAAA,QAAKyC,SAAS,CAAC,sCAAsC,CAAAC,QAAA,cACnDxC,KAAA,QAAKuC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC1C,IAAA,QAAKyC,SAAS,CAAC,oEAAoE,CAAAC,QAAA,cACjF1C,IAAA,SAAMyC,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,CACpD,CAAC,cACN1C,IAAA,SAAMyC,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,SAAO,CAAM,CAAC,EACtE,CAAC,CACH,CAAC,cAGN1C,IAAA,QAAKyC,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CACxCL,kBAAkB,CAACM,GAAG,CAAEL,IAAI,eAC3BtC,IAAA,CAACZ,OAAO,EAENwD,EAAE,CAAEN,IAAI,CAAC/B,IAAK,CACdkC,SAAS,CAAEI,IAAA,MAAC,CAAEC,QAAS,CAAC,CAAAD,IAAA,OACtB,CAAA3B,UAAU,CACR4B,QAAQ,CACJ,mDAAmD,CACnD,uEAAuE,CAC3E,uEACF,CAAC,EACF,CAAAJ,QAAA,CAEAK,KAAA,MAAC,CAAED,QAAS,CAAC,CAAAC,KAAA,oBACZ7C,KAAA,CAAAE,SAAA,EAAAsC,QAAA,eACE1C,IAAA,CAACsC,IAAI,CAAC9B,IAAI,EACRiC,SAAS,CAAEvB,UAAU,CACnB4B,QAAQ,CAAG,kBAAkB,CAAG,yCAAyC,CACzE,4BACF,CAAE,CACF,cAAY,MAAM,CACnB,CAAC,CACDR,IAAI,CAAChC,IAAI,EACV,CAAC,EACJ,EAtBIgC,IAAI,CAAChC,IAuBH,CACV,CAAC,CACC,CAAC,cAGNN,IAAA,QAAKyC,SAAS,CAAC,4CAA4C,CAAAC,QAAA,cACzDxC,KAAA,QAAKuC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC1C,IAAA,QAAKyC,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5B1C,IAAA,QAAKyC,SAAS,CAAC,mEAAmE,CAAAC,QAAA,cAChF1C,IAAA,SAAMyC,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAChD,CAAAX,IAAI,SAAJA,IAAI,kBAAAF,eAAA,CAAJE,IAAI,CAAEiB,SAAS,UAAAnB,eAAA,iBAAfA,eAAA,CAAiBoB,MAAM,CAAC,CAAC,CAAC,GAAI,GAAG,CAC9B,CAAC,CACJ,CAAC,CACH,CAAC,cACN/C,KAAA,QAAKuC,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClC1C,IAAA,MAAGyC,SAAS,CAAC,4CAA4C,CAAAC,QAAA,CACtDX,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEiB,SAAS,CACf,CAAC,cACJhD,IAAA,MAAGyC,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAC1CX,IAAI,SAAJA,IAAI,kBAAAD,UAAA,CAAJC,IAAI,CAAEQ,IAAI,UAAAT,UAAA,iBAAVA,UAAA,CAAYoB,OAAO,CAAC,GAAG,CAAE,GAAG,CAAC,CAACC,WAAW,CAAC,CAAC,CAC3C,CAAC,EACD,CAAC,cACNnD,IAAA,WACEoD,OAAO,CAAElB,YAAa,CACtBO,SAAS,CAAC,4CAA4C,CACtDY,KAAK,CAAC,QAAQ,CAAAX,QAAA,cAEd1C,IAAA,CAACJ,yBAAyB,EAAC6C,SAAS,CAAC,SAAS,CAAE,CAAC,CAC3C,CAAC,EACN,CAAC,CACH,CAAC,EACH,CAAC,CACH,CAAC,CACH,CAAC,CAEV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}